

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Extending Twig &mdash; Twig v1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Twig v1 documentation" href="index.html" />
    <link rel="next" title="Creating a Twig Extension" href="extensions.html" />
    <link rel="prev" title="Twig for Developers" href="api.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="extensions.html" title="Creating a Twig Extension"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="api.html" title="Twig for Developers"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Twig v1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="extending-twig">
<h1>Extending Twig<a class="headerlink" href="#extending-twig" title="Permalink to this headline">¶</a></h1>
<p>Twig can be extended in many ways; you can add extra tags, filters, tests,
operators, global variables, and functions. You can even extend the parser
itself with node visitors.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This chapter describes how to extend Twig easily. If you want to reuse
your changes in different projects or if you want to share them with
others, you should then create an extension as described in the next
chapter.</p>
</div>
<p>Before extending Twig, you must understand the differences between all the
different possible extension points and when to use them.</p>
<p>First, remember that Twig has two main language constructs:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">}}</span></tt>: used to print the result of an expression evaluation;</li>
<li><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">%}</span></tt>: used to execute statements.</li>
</ul>
<p>To understand why Twig exposes so many extension points, let&#8217;s see how to
implement a <em>Lorem ipsum</em> generator (it needs to know the number of words to
generate).</p>
<p>You can use a <tt class="docutils literal"><span class="pre">lipsum</span></tt> <em>tag</em>:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">lipsum</span> <span class="m">40</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>That works, but using a tag for <tt class="docutils literal"><span class="pre">lipsum</span></tt> is not a good idea for at least
three main reasons:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">lipsum</span></tt> is not a language construct;</p>
</li>
<li><p class="first">The tag outputs something;</p>
</li>
<li><p class="first">The tag is not flexible as you cannot use it in an expression:</p>
<div class="highlight-jinja"><pre>{{ 'some text' ~ {% lipsum 40 %} ~ 'some more text' }}</pre>
</div>
</li>
</ul>
<p>In fact, you rarely need to create tags; and that&#8217;s good news because tags are
the most complex extension point of Twig.</p>
<p>Now, let&#8217;s use a <tt class="docutils literal"><span class="pre">lipsum</span></tt> <em>filter</em>:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="m">40</span><span class="o">|</span><span class="nf">lipsum</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>Again, it works, but it looks weird. A filter transforms the passed value to
something else but here we use the value to indicate the number of words to
generate.</p>
<p>Next, let&#8217;s use a <tt class="docutils literal"><span class="pre">lipsum</span></tt> <em>function</em>:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">lipsum</span><span class="o">(</span><span class="m">40</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>Here we go. For this specific example, the creation of a function is the
extension point to use. And you can use it anywhere an expression is accepted:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="s1">&#39;some text&#39;</span> <span class="o">~</span> <span class="nv">ipsum</span><span class="o">(</span><span class="m">40</span><span class="o">)</span> <span class="o">~</span> <span class="s1">&#39;some more text&#39;</span> <span class="cp">}}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">ipsum</span> <span class="o">=</span> <span class="nv">ipsum</span><span class="o">(</span><span class="m">40</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>Last but not the least, you can also use a <em>global</em> object with a method able
to generate lorem ipsum text:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">text.lipsum</span><span class="o">(</span><span class="m">40</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>As a rule of thumb, use functions for frequently used features and global
objects for everything else.</p>
<p>Keep in mind the following when you want to extend Twig:</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="37%" />
<col width="14%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">What?</th>
<th class="head">Implementation difficulty?</th>
<th class="head">How often?</th>
<th class="head">When?</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>macro</em></td>
<td>trivial</td>
<td>frequent</td>
<td>Content generation</td>
</tr>
<tr><td><em>global</em></td>
<td>trivial</td>
<td>frequent</td>
<td>Helper object</td>
</tr>
<tr><td><em>function</em></td>
<td>trivial</td>
<td>frequent</td>
<td>Content generation</td>
</tr>
<tr><td><em>filter</em></td>
<td>trivial</td>
<td>frequent</td>
<td>Value transformation</td>
</tr>
<tr><td><em>tag</em></td>
<td>complex</td>
<td>rare</td>
<td>DSL language construct</td>
</tr>
<tr><td><em>test</em></td>
<td>trivial</td>
<td>rare</td>
<td>Boolean decision</td>
</tr>
<tr><td><em>operator</em></td>
<td>trivial</td>
<td>rare</td>
<td>Values transformation</td>
</tr>
</tbody>
</table>
<div class="section" id="globals">
<h2>Globals<a class="headerlink" href="#globals" title="Permalink to this headline">¶</a></h2>
<p>A global variable is like any other template variable, except that it&#8217;s
available in all templates and macros:</p>
<div class="highlight-python"><pre>$twig = new Twig_Environment($loader);
$twig-&gt;addGlobal('text', new Text());</pre>
</div>
<p>You can then use the <tt class="docutils literal"><span class="pre">text</span></tt> variable anywhere in a template:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">text.lipsum</span><span class="o">(</span><span class="m">40</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="filters">
<h2>Filters<a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h2>
<p>A filter is a regular PHP function or an object method that takes the left
side of the filter (before the pipe <tt class="docutils literal"><span class="pre">|</span></tt>) as first argument and the extra
arguments passed to the filter (within parentheses <tt class="docutils literal"><span class="pre">()</span></tt>) as extra arguments.</p>
<p>Defining a filter is as easy as associating the filter name with a PHP
callable. For instance, let&#8217;s say you have the following code in a template:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="s1">&#39;TWIG&#39;</span><span class="o">|</span><span class="nf">lower</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>When compiling this template to PHP, Twig looks for the PHP callable
associated with the <tt class="docutils literal"><span class="pre">lower</span></tt> filter. The <tt class="docutils literal"><span class="pre">lower</span></tt> filter is a built-in Twig
filter, and it is simply mapped to the PHP <tt class="docutils literal"><span class="pre">strtolower()</span></tt> function. After
compilation, the generated PHP code is roughly equivalent to:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">strtolower</span><span class="p">(</span><span class="s1">&#39;TWIG&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
<p>As you can see, the <tt class="docutils literal"><span class="pre">'TWIG'</span></tt> string is passed as a first argument to the PHP
function.</p>
<p>A filter can also take extra arguments like in the following example:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">now</span><span class="o">|</span><span class="nf">date</span><span class="o">(</span><span class="s1">&#39;d/m/Y&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>In this case, the extra arguments are passed to the function after the main
argument, and the compiled code is equivalent to:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">twig_date_format_filter</span><span class="p">(</span><span class="nv">$now</span><span class="p">,</span> <span class="s1">&#39;d/m/Y&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
<p>Let&#8217;s see how to create a new filter.</p>
<p>In this section, we will create a <tt class="docutils literal"><span class="pre">rot13</span></tt> filter, which should return the
<a class="reference external" href="http://www.php.net/manual/en/function.str-rot13.php">rot13</a> transformation of a string. Here is an example of its usage and the
expected output:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="s2">&quot;Twig&quot;</span><span class="o">|</span><span class="nf">rot13</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# should displays Gjvt #}</span><span class="x"></span>
</pre></div>
</div>
<p>Adding a filter is as simple as calling the <tt class="docutils literal"><span class="pre">addFilter()</span></tt> method on the
<tt class="docutils literal"><span class="pre">Twig_Environment</span></tt> instance:</p>
<div class="highlight-python"><pre>$twig = new Twig_Environment($loader);
$twig-&gt;addFilter('rot13', new Twig_Filter_Function('rot13'));</pre>
</div>
<p>The second argument of <tt class="docutils literal"><span class="pre">addFilter()</span></tt> is an instance of <tt class="docutils literal"><span class="pre">Twig_Filter</span></tt>.
Here, we use <tt class="docutils literal"><span class="pre">Twig_Filter_Function</span></tt> as the filter is a PHP function. The
first argument passed to the <tt class="docutils literal"><span class="pre">Twig_Filter_Function</span></tt> constructor is the name
of the PHP function to call, here <tt class="docutils literal"><span class="pre">str_rot13</span></tt>, a native PHP function.</p>
<p>Let&#8217;s say I now want to be able to add a prefix before the converted string:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="s2">&quot;Twig&quot;</span><span class="o">|</span><span class="nf">rot13</span><span class="o">(</span><span class="s1">&#39;prefix_&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# should displays prefix_Gjvt #}</span><span class="x"></span>
</pre></div>
</div>
<p>As the PHP <tt class="docutils literal"><span class="pre">str_rot13()</span></tt> function does not support this requirement, let&#8217;s
create a new PHP function:</p>
<div class="highlight-python"><pre>function project_compute_rot13($string, $prefix = '')
{
    return $prefix.str_rot13($string);
}</pre>
</div>
<p>As you can see, the <tt class="docutils literal"><span class="pre">prefix</span></tt> argument of the filter is passed as an extra
argument to the <tt class="docutils literal"><span class="pre">project_compute_rot13()</span></tt> function.</p>
<p>Adding this filter is as easy as before:</p>
<div class="highlight-python"><pre>$twig-&gt;addFilter('rot13', new Twig_Filter_Function('project_compute_rot13'));</pre>
</div>
<p>For better encapsulation, a filter can also be defined as a static method of a
class. The <tt class="docutils literal"><span class="pre">Twig_Filter_Function</span></tt> class can also be used to register such
static methods as filters:</p>
<div class="highlight-python"><pre>$twig-&gt;addFilter('rot13', new Twig_Filter_Function('SomeClass::rot13Filter'));</pre>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">In an extension, you can also define a filter as a static method of the
extension class.</p>
</div>
<div class="section" id="environment-aware-filters">
<h3>Environment aware Filters<a class="headerlink" href="#environment-aware-filters" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">Twig_Filter</span></tt> classes take options as their last argument. For instance,
if you want access to the current environment instance in your filter, set the
<tt class="docutils literal"><span class="pre">needs_environment</span></tt> option to <tt class="docutils literal"><span class="pre">true</span></tt>:</p>
<div class="highlight-python"><pre>$filter = new Twig_Filter_Function('str_rot13', array('needs_environment' =&gt; true));</pre>
</div>
<p>Twig will then pass the current environment as the first argument to the
filter call:</p>
<div class="highlight-python"><pre>function twig_compute_rot13(Twig_Environment $env, $string)
{
    // get the current charset for instance
    $charset = $env-&gt;getCharset();

    return str_rot13($string);
}</pre>
</div>
</div>
<div class="section" id="automatic-escaping">
<h3>Automatic Escaping<a class="headerlink" href="#automatic-escaping" title="Permalink to this headline">¶</a></h3>
<p>If automatic escaping is enabled, the output of the filter may be escaped
before printing. If your filter acts as an escaper (or explicitly outputs html
or javascript code), you will want the raw output to be printed. In such a
case, set the <tt class="docutils literal"><span class="pre">is_safe</span></tt> option:</p>
<div class="highlight-python"><pre>$filter = new Twig_Filter_Function('nl2br', array('is_safe' =&gt; array('html')));</pre>
</div>
<p>Some filters may have to work on already escaped or safe values. In such a
case, set the <tt class="docutils literal"><span class="pre">pre_escape</span></tt> option:</p>
<div class="highlight-python"><pre>$filter = new Twig_Filter_Function('somefilter', array('pre_escape' =&gt; 'html', 'is_safe' =&gt; array('html')));</pre>
</div>
</div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p>A function is a regular PHP function or an object method that can be called from
templates.</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">constant</span><span class="o">(</span><span class="s2">&quot;DATE_W3C&quot;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>When compiling this template to PHP, Twig looks for the PHP callable
associated with the <tt class="docutils literal"><span class="pre">constant</span></tt> function. The <tt class="docutils literal"><span class="pre">constant</span></tt> function is a built-in Twig
function, and it is simply mapped to the PHP <tt class="docutils literal"><span class="pre">constant()</span></tt> function. After
compilation, the generated PHP code is roughly equivalent to:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">constant</span><span class="p">(</span><span class="s1">&#39;DATE_W3C&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
<p>Adding a function is similar to adding a filter. This can be done by calling the
<tt class="docutils literal"><span class="pre">addFunction()</span></tt> method on the <tt class="docutils literal"><span class="pre">Twig_Environment</span></tt> instance:</p>
<div class="highlight-python"><pre>$twig = new Twig_Environment($loader);
$twig-&gt;addFunction('functionName', new Twig_Function_Function('someFunction'));</pre>
</div>
<p>You can also expose extension methods as functions in your templates:</p>
<div class="highlight-python"><pre>// $this is an object that implements Twig_ExtensionInterface.
$twig = new Twig_Environment($loader);
$twig-&gt;addFunction('otherFunction', new Twig_Function_Method($this, 'someMethod'));</pre>
</div>
<p>Functions also support <tt class="docutils literal"><span class="pre">needs_environment</span></tt> and <tt class="docutils literal"><span class="pre">is_safe</span></tt> parameters.</p>
</div>
<div class="section" id="tags">
<h2>Tags<a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h2>
<p>One of the most exciting feature of a template engine like Twig is the
possibility to define new language constructs. This is also the most complex
feature as you need to understand how Twig&#8217;s internals work.</p>
<p>Let&#8217;s create a simple <tt class="docutils literal"><span class="pre">set</span></tt> tag that allows the definition of simple
variables from within a template. The tag can be used like follows:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">name</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# should output value #}</span><span class="x"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">set</span></tt> tag is part of the Core extension and as such is always
available. The built-in version is slightly more powerful and supports
multiple assignments by default (cf. the template designers chapter for
more information).</p>
</div>
<p>Three steps are needed to define a new tag:</p>
<ul class="simple">
<li>Defining a Token Parser class (responsible for parsing the template code);</li>
<li>Defining a Node class (responsible for converting the parsed code to PHP);</li>
<li>Registering the tag.</li>
</ul>
<div class="section" id="registering-a-new-tag">
<h3>Registering a new tag<a class="headerlink" href="#registering-a-new-tag" title="Permalink to this headline">¶</a></h3>
<p>Adding a tag is as simple as calling the <tt class="docutils literal"><span class="pre">addTokenParser</span></tt> method on the
<tt class="docutils literal"><span class="pre">Twig_Environment</span></tt> instance:</p>
<div class="highlight-python"><pre>$twig = new Twig_Environment($loader);
$twig-&gt;addTokenParser(new Project_Set_TokenParser());</pre>
</div>
</div>
<div class="section" id="defining-a-token-parser">
<h3>Defining a Token Parser<a class="headerlink" href="#defining-a-token-parser" title="Permalink to this headline">¶</a></h3>
<p>Now, let&#8217;s see the actual code of this class:</p>
<div class="highlight-python"><pre>class Project_Set_TokenParser extends Twig_TokenParser
{
    public function parse(Twig_Token $token)
    {
        $lineno = $token-&gt;getLine();
        $name = $this-&gt;parser-&gt;getStream()-&gt;expect(Twig_Token::NAME_TYPE)-&gt;getValue();
        $this-&gt;parser-&gt;getStream()-&gt;expect(Twig_Token::OPERATOR_TYPE, '=');
        $value = $this-&gt;parser-&gt;getExpressionParser()-&gt;parseExpression();

        $this-&gt;parser-&gt;getStream()-&gt;expect(Twig_Token::BLOCK_END_TYPE);

        return new Project_Set_Node($name, $value, $lineno, $this-&gt;getTag());
        }

    public function getTag()
    {
        return 'set';
    }
}</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">getTag()</span></tt> method must return the tag we want to parse, here <tt class="docutils literal"><span class="pre">set</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">parse()</span></tt> method is invoked whenever the parser encounters a <tt class="docutils literal"><span class="pre">set</span></tt>
tag. It should return a <tt class="docutils literal"><span class="pre">Twig_Node</span></tt> instance that represents the node (the
<tt class="docutils literal"><span class="pre">Project_Set_Node</span></tt> calls creating is explained in the next section).</p>
<p>The parsing process is simplified thanks to a bunch of methods you can call
from the token stream (<tt class="docutils literal"><span class="pre">$this-&gt;parser-&gt;getStream()</span></tt>):</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">getCurrent()</span></tt>: Gets the current token in the stream.</li>
<li><tt class="docutils literal"><span class="pre">next()</span></tt>: Moves to the next token in the stream, <em>but returns the old one</em>.</li>
<li><tt class="docutils literal"><span class="pre">test($type)</span></tt>, <tt class="docutils literal"><span class="pre">test($value)</span></tt> or <tt class="docutils literal"><span class="pre">test($type,</span> <span class="pre">$value)</span></tt>: Determines whether
the current token is of a particular type or value (or both). The value may be an
array of several possible values.</li>
<li><tt class="docutils literal"><span class="pre">expect($type[,</span> <span class="pre">$value[,</span> <span class="pre">$message]])</span></tt>: If the current token isn&#8217;t of the given
type/value a syntax error is thrown. Otherwise, if the type and value are correct,
the token is returned and the stream moves to the next token.</li>
<li><tt class="docutils literal"><span class="pre">look()</span></tt>: Looks a the next token without consuming it.</li>
</ul>
<p>Parsing expressions is done by calling the <tt class="docutils literal"><span class="pre">parseExpression()</span></tt> like we did for
the <tt class="docutils literal"><span class="pre">set</span></tt> tag.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Reading the existing <tt class="docutils literal"><span class="pre">TokenParser</span></tt> classes is the best way to learn all
the nitty-gritty details of the parsing process.</p>
</div>
</div>
<div class="section" id="defining-a-node">
<h3>Defining a Node<a class="headerlink" href="#defining-a-node" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">Project_Set_Node</span></tt> class itself is rather simple:</p>
<div class="highlight-python"><pre>class Project_Set_Node extends Twig_Node
{
    public function __construct($name, Twig_Node_Expression $value, $lineno)
    {
        parent::__construct(array('value' =&gt; $value), array('name' =&gt; $name), $lineno);
        }

    public function compile(Twig_Compiler $compiler)
    {
        $compiler
            -&gt;addDebugInfo($this)
            -&gt;write('$context[\''.$this-&gt;getAttribute('name').'\'] = ')
            -&gt;subcompile($this-&gt;getNode('value'))
            -&gt;raw(";\n")
        ;
    }
}</pre>
</div>
<p>The compiler implements a fluid interface and provides methods that helps the
developer generate beautiful and readable PHP code:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">subcompile()</span></tt>: Compiles a node.</li>
<li><tt class="docutils literal"><span class="pre">raw()</span></tt>: Writes the given string as is.</li>
<li><tt class="docutils literal"><span class="pre">write()</span></tt>: Writes the given string by adding indentation at the beginning
of each line.</li>
<li><tt class="docutils literal"><span class="pre">string()</span></tt>: Writes a quoted string.</li>
<li><tt class="docutils literal"><span class="pre">repr()</span></tt>: Writes a PHP representation of a given value (see
<tt class="docutils literal"><span class="pre">Twig_Node_For</span></tt> for a usage example).</li>
<li><tt class="docutils literal"><span class="pre">addDebugInfo()</span></tt>: Adds the line of the original template file related to
the current node as a comment.</li>
<li><tt class="docutils literal"><span class="pre">indent()</span></tt>: Indents the generated code (see <tt class="docutils literal"><span class="pre">Twig_Node_Block</span></tt> for a
usage example).</li>
<li><tt class="docutils literal"><span class="pre">outdent()</span></tt>: Outdents the generated code (see <tt class="docutils literal"><span class="pre">Twig_Node_Block</span></tt> for a
usage example).</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Extending Twig</a><ul>
<li><a class="reference internal" href="#globals">Globals</a></li>
<li><a class="reference internal" href="#filters">Filters</a><ul>
<li><a class="reference internal" href="#environment-aware-filters">Environment aware Filters</a></li>
<li><a class="reference internal" href="#automatic-escaping">Automatic Escaping</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#tags">Tags</a><ul>
<li><a class="reference internal" href="#registering-a-new-tag">Registering a new tag</a></li>
<li><a class="reference internal" href="#defining-a-token-parser">Defining a Token Parser</a></li>
<li><a class="reference internal" href="#defining-a-node">Defining a Node</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="api.html"
                        title="previous chapter">Twig for Developers</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="extensions.html"
                        title="next chapter">Creating a Twig Extension</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/advanced.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="extensions.html" title="Creating a Twig Extension"
             >next</a> |</li>
        <li class="right" >
          <a href="api.html" title="Twig for Developers"
             >previous</a> |</li>
        <li><a href="index.html">Twig v1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Rafael Goulart.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>